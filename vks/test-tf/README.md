## Структура файлов


### ansible
Хранятся файлы связанные с настройкой праков машин
там же хранится template hosts.cfg, с помощью которого terraform самостоятельно генерирует файл hosts
### fromat.sh
template_file в Terraform к сожалению не умеет в переменную класть список(где ip), для обхода был придуман алгоритм, в переменную идет строка из ip адресов, преобразованная с помощью метода join, а format.sh, преобразует в нужный вид файл hosts для работы с ansible
### generate-ansible.tf
Файл где описано создание hosts для terraform, и запускается format.sh с помощью null_resource
### provider.tf
Описаны провайдеры и подключение к облаку, входные данные вынесеы в переменные, которые нужно заполнить создав файл terraform.tfvars
Файл terraform.tfvars должен быть вида:
```
pod_count=10
username="test@mail.ru"
password="ваш пароль"
project_id="ваш id прокта"
private_key="terraform.pem"
```
изменяя pod_count, мы регулируем сколько виртуальных машин pod будет создано

### variables.tf
Описаны переменные с описанием
### vm.tf
Описано создание правил файервола, дисков для вм и сами вм
Обратите внимание что image_id и image_name используются свои, в ваших проектах их нету, выберете другой. И виртуальные машины подключаются к уже существующей сети "Terraform_network"
